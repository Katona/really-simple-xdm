<html>
<body>
  <button id="test-event">Test Event</button>

  <script src="/index.js"></script>
  <script src="https://unpkg.com/eventemitter3@latest/umd/eventemitter3.min.js"></script>
  <script>
    const eventEmitter = new EventEmitter3();
    const messagingSrv = new xdmjs.CrossWindowMessagingService(window.parent, "*");
    const config = {
      events: [ { register: 'on', deregister: 'off' } ]
    }
    const server = xdmjs.createServer(messagingSrv, eventEmitter, config);
    document.querySelector('#test-event').onclick = () => eventEmitter.emit('click');
    console.log('Server is ready.');
</script>
</body>
</html>